<div class="container">
  <div class="page">
    <app-header [cartItems]="cartItems"></app-header>
    <main>
      <div *ngIf="!cartItems.length">
        <img src="../../assets/images/empty-cart.png" alt="" />
      </div>
      <mat-card *ngFor="let item of cartItems; let i = index">
        <div>{{ item.product.name }}</div>
        <div>
          <div>
            <button [disabled]="item.quantity == 0" (click)="subtractQuantity(i)" mat-button>
              -</button>{{ item.quantity }}
            <button (click)="addQuantity(i)" mat-button>+</button>
          </div>
          <button (click)="removeFromCart(i)" mat-raised-button color="warn" class="cart-add">
            Remove
          </button>
        </div>
      </mat-card>
      <mat-card *ngIf="cartItems.length" id="total">
        <p>Total = ${{ total }}</p>

        <button [disabled]="!logged" mat-raised-button (click)="buy()">
          Buy
        </button>
        <div class="error" *ngIf="!logged">
          You must <a routerLink="/login">log in </a> to buy
        </div>
      </mat-card>
    </main>
    <footer></footer>
  </div>
</div>
